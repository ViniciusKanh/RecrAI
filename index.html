<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RecrAI - Análise Inteligente de Currículos</title>

  <!-- Fonts / Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>

  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- Splash moderno e animado ------------------------------------------------>
  <div id="splash" role="status" aria-live="polite" aria-label="Carregando RecrAI">
    <div class="splash-bg" aria-hidden="true">
      <div class="blob b1"></div>
      <div class="blob b2"></div>
      <div class="blob b3"></div>
      <div class="grid"></div>
    </div>

    <div class="splash-inner">
      <img src="./RecrAI_logo.png" alt="RecrAI" class="splash-logo"/>
      <h1 class="splash-title">Recr<span>AI</span></h1>
      <p class="splash-sub">
        <span class="type">Análise inteligente de currículos</span>
        <i class="ri-sparkling-2-line"></i>
      </p>

      <div class="splash-bar" aria-hidden="true"><span id="splash-progress"></span></div>
      <div class="splash-hint" id="splash-hint">inicializando…</div>
    </div>
  </div>

  <!-- Header ----------------------------------------------------------------->
  <header id="main-header" class="main-header">
    <div class="logo">
      <img src="./RecrAI_logo.png" alt="RecrAI" class="logo-img"/>
      <span>RecrAI</span>
    </div>

    <nav class="main-nav">
      <a href="#/" class="nav-link" data-view="dashboard"><i class="ri-dashboard-line"></i><span>Dashboard</span></a>
      <a href="#/jobs" class="nav-link" data-view="jobs"><i class="ri-briefcase-4-line"></i><span>Vagas</span></a>
      <a href="#/analyze" class="nav-link" data-view="analyze"><i class="ri-file-search-line"></i><span>Analisar</span></a>
      <a href="#/candidates" class="nav-link" data-view="candidates"><i class="ri-team-line"></i><span>Banco de Talentos</span></a>
    </nav>

    <div class="header-actions">
      <button id="theme-toggle" class="btn-ghost" aria-label="Mudar tema">
        <i class="ri-sun-line"></i>
      </button>
      <a href="#/settings" class="btn-ghost nav-link" data-view="settings" aria-label="Configurações">
        <i class="ri-settings-3-line"></i>
      </a>
    </div>
  </header>

  <!-- Conteúdo --------------------------------------------------------------->
  <main id="app-root"></main>

  <!-- Toasts & Modais -->
  <div id="toast-root"></div>
  <div id="modal-root"></div>

  <script>
    // Pode ajustar nas Configurações dentro do app
    window.BACKEND_URL = "https://viniciuskhan-recrai-backend.hf.space";
    window.API_PREFIX  = "";
  </script>

  <!-- Controlador do Splash (autônomo e acessível) -->
  <script>
  (function(){
    const splash = document.getElementById('splash');
    const bar = document.getElementById('splash-progress');
    const hint = document.getElementById('splash-hint');

    // Estados do texto
    const steps = [
      'carregando UI…',
      'sincronizando fontes…',
      'conectando serviços…',
      'preparando dashboard…'
    ];

    let idx = 0;
    const tHint = setInterval(()=>{
      hint.textContent = steps[idx % steps.length];
      idx++;
    }, 900);

    // Animação de progresso suave até o app sinalizar "pronto"
    let p = 0;
    const tBar = setInterval(()=>{
      p = Math.min(96, p + (p<60 ? 7 : 4));
      bar.style.width = p + '%';
    }, 180);

    // Preferência do usuário (reduzir movimento)
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReduced) {
      splash.classList.add('reduce');
    }

    // O app dispara 'recrAI:ready' quando a SPA está montada (veja patch no app.js)
    function closeSplash() {
      clearInterval(tBar); clearInterval(tHint);
      bar.style.width = '100%';
      setTimeout(()=> splash.classList.add('hide'), 220);
      // proteção extra: remove do DOM depois da transição
      setTimeout(()=> splash.remove(), 900);
      // header shrink sutil ao rolar
      const header = document.getElementById('main-header');
      let lastY = 0;
      window.addEventListener('scroll', () => {
        const y = window.scrollY || 0;
        header.classList.toggle('shrink', y > 8);
        lastY = y;
      }, {passive:true});
    }

    window.addEventListener('recrAI:ready', closeSplash, {once:true});
    // Fallback: se o app não sinalizar por algum motivo, fecha em 4.5s
    setTimeout(closeSplash, 4500);
  })();
  </script>

  <script src="app.js"></script>

  <noscript>
    <style>#splash{display:none!important}</style>
    <div style="padding:16px">Ative o JavaScript para usar o RecrAI.</div>
  </noscript>
</body>
</html>
